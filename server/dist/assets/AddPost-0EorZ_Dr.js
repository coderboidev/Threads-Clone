import{a as R,Y as P,r as a,t as k,K as x,Q as f,R as j,j as e,S as i,L as A,Z as D}from"./index-ejOMQ5mP.js";import{F as N}from"./index.esm-p0iI1Hkx.js";import{R as F}from"./index.esm-ivCNutZg.js";import{u as c}from"./useMediaQuery-veD3v3SJ.js";import{D as M,a as T,b as z}from"./DialogTitle-eM_ALCrU.js";import{A as B}from"./Avatar-cj3lPPpq.js";import{T as C}from"./Typography-8tdXd-pp.js";import{B as E}from"./Button-O04fUjmC.js";import"./iconBase-4R61x3Rr.js";import"./useEnhancedEffect-pF7N8rFg.js";import"./useTheme-js-pnjgx.js";import"./Modal-nf0MEq-X.js";import"./useForkRef-kwGwuOoY.js";import"./TransitionGroupContext-prrqPGpl.js";import"./useSlotProps-_sd9eYnP.js";import"./useId-Su-98Ebu.js";import"./createSvgIcon-mUo6UpKZ.js";import"./ButtonBase-DuLANiGZ.js";const te=()=>{const{openAddPostModal:b,myInfo:r}=R(s=>s.service),[w,t]=P(),[l,d]=a.useState(),[o,m]=a.useState(),y=c("(min-width:700px)"),n=c("(min-width:500px)"),p=c("(min-width:300px)"),u=k(),h=a.useRef(),g=()=>{u(x(!1))},v=()=>{h.current.click()},S=async()=>{const s=new FormData;l&&s.append("text",l),o&&s.append("media",o),await w(s)};return a.useEffect(()=>{t.isSuccess&&(d(),m(),u(x(!1)),f.success(t.data.msg,{position:"top-center",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored",transition:j})),t.isError&&f.error(t.error.data.msg,{position:"top-center",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored",transition:j})},[t.isError,t.isSuccess]),e.jsx(e.Fragment,{children:e.jsx(M,{open:b===!0,onClose:g,fullWidth:!0,fullScreen:!y,children:t!=null&&t.isLoading?e.jsx(i,{height:"60vh",children:e.jsx(A,{})}):e.jsxs(e.Fragment,{children:[e.jsx(D,{position:"absolute",top:20,right:20,onClick:g,children:e.jsx(F,{size:28,className:"image-icon"})}),e.jsx(T,{textAlign:"center",mb:5,children:"New Thread..."}),e.jsxs(z,{children:[e.jsxs(i,{flexDirection:"row",gap:2,mb:5,children:[e.jsx(B,{src:r?r.profilePic:"",alt:r?r.userName:""}),e.jsxs(i,{children:[e.jsx(C,{variant:"h6",fontWeight:"bold",fontSize:"1rem",children:r?r.userName:""}),e.jsx("textarea",{cols:n?40:25,rows:2,className:"text1",placeholder:"Start a thread...",onChange:s=>d(s.target.value),autoFocus:!0}),o?e.jsx("img",{src:URL.createObjectURL(o),alt:o.name,id:"url-img",width:n?300:p?200:100,height:n?300:p?200:100}):null,e.jsx(N,{size:28,className:"image-icon",onClick:v}),e.jsx("input",{type:"file",accept:"image/*",className:"file-input",ref:h,onChange:s=>m(s.target.files[0])})]})]}),e.jsxs(i,{flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[" ",e.jsx(C,{variant:"h6",fontSize:"1rem",color:"gray",children:"Anyone can reply"}),e.jsx(E,{size:"large",sx:{bgcolor:"GrayText",color:"white",borderRadius:"10px",":hover":{bgcolor:"gray",cursor:"pointer"}},onClick:S,children:"Post"})]})]})]})})})};export{te as default};
